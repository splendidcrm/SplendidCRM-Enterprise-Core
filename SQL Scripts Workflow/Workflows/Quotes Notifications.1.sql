

print 'WORKFLOWS Quotes Notifications';
GO

set nocount on;
GO

declare @ID uniqueidentifier;
set @ID = 'A278A0F2-D47B-4A74-A5BE-F208D8995F03';
if not exists(select * from WORKFLOW where ID = @ID) begin -- then
	-- 07/19/2010 Paul.  Add PARENT_ID. 
	exec dbo.spWORKFLOWS_Update @ID, null, 'Quotes Notification', 'Quotes', 'QUOTES_AUDIT', 1, 'Normal', 'alerts_actions', 'All', null, 'select *
  from            QUOTES_AUDIT        QUOTES
  left outer join QUOTES_AUDIT        QUOTES_AUDIT_OLD
               on QUOTES_AUDIT_OLD.ID = QUOTES.ID
              and QUOTES_AUDIT_OLD.AUDIT_VERSION = (select max(QUOTES_AUDIT.AUDIT_VERSION)
                                                  from QUOTES_AUDIT
                                                 where QUOTES_AUDIT.ID            =  QUOTES.ID
                                                   and QUOTES_AUDIT.AUDIT_VERSION <  QUOTES.AUDIT_VERSION
                                                   and QUOTES_AUDIT.AUDIT_TOKEN   <> QUOTES.AUDIT_TOKEN
                                               )
  left outer join vwUSERS                     USERS_ASSIGNED_USER_ID
               on USERS_ASSIGNED_USER_ID.ID = QUOTES.ASSIGNED_USER_ID
 where QUOTES.AUDIT_ID = @AUDIT_ID
   and QUOTES.DELETED  = 0
   and (QUOTES_AUDIT_OLD.AUDIT_ID is null      or (not(QUOTES.ASSIGNED_USER_ID          is null     and QUOTES_AUDIT_OLD.ASSIGNED_USER_ID          is null    ) and (QUOTES.ASSIGNED_USER_ID          <> QUOTES_AUDIT_OLD.ASSIGNED_USER_ID          or QUOTES.ASSIGNED_USER_ID is null or QUOTES_AUDIT_OLD.ASSIGNED_USER_ID is null)))
   and USERS_ASSIGNED_USER_ID.RECEIVE_NOTIFICATIONS = 1
   and USERS_ASSIGNED_USER_ID.EMAIL1 is not null
', '<?xml version="1.0" encoding="UTF-8"?><Report Name="" xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner" xmlns="http://schemas.microsoft.com/sqlserver/reporting/2005/01/reportdefinition"><CustomProperties><CustomProperty><Name>crm:Module</Name><Value>Tasks</Value></CustomProperty><CustomProperty><Name>crm:Related</Name><Value></Value></CustomProperty><CustomProperty><Name>crm:RelatedModules</Name><Value>&lt;Relationships /&gt;</Value></CustomProperty><CustomProperty><Name>crm:Relationships</Name><Value>&lt;Relationships&gt;&lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;Tasks&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Tasks&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;TASKS&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;TASKS&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Tasks TASKS&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Tasks TASKS] Tasks&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;tasks_assigned_user&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Users&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;USERS&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;ASSIGNED_USER_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;USERS_ASSIGNED_USER_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Users USERS_ASSIGNED_USER_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Users USERS_ASSIGNED_USER_ID] Tasks: Assigned to User&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;contact_tasks&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Contacts&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;CONTACTS&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;CONTACT_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;CONTACTS_CONTACT_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Contacts CONTACTS_CONTACT_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Contacts CONTACTS_CONTACT_ID] Tasks: Contact ID&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;tasks_created_by&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Users&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;USERS&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;CREATED_BY_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;USERS_CREATED_BY_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Users USERS_CREATED_BY_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Users USERS_CREATED_BY_ID] Tasks: Created by User&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;tasks_modified_user&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Users&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;USERS&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;MODIFIED_USER_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;USERS_MODIFIED_USER_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Users USERS_MODIFIED_USER_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Users USERS_MODIFIED_USER_ID] Tasks: Modified by User&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;bug_tasks&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Bugs&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;BUGS&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;BUGS_PARENT_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Bugs BUGS_PARENT_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Bugs BUGS_PARENT_ID] Tasks: Bug Tracker Parent ID&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quote_tasks&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;QUOTES_PARENT_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Quotes QUOTES_PARENT_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Quotes QUOTES_PARENT_ID] Tasks: Quotes Parent ID&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;lead_tasks&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Leads&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;LEADS&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;LEADS_PARENT_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Leads LEADS_PARENT_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Leads LEADS_PARENT_ID] Tasks: Leads Parent ID&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;case_tasks&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Cases&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;CASES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;CASES_PARENT_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Cases CASES_PARENT_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Cases CASES_PARENT_ID] Tasks: Cases Parent ID&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;opportunity_tasks&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Opportunities&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;OPPORTUNITIES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;OPPORTUNITIES_PARENT_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Opportunities OPPORTUNITIES_PARENT_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Opportunities OPPORTUNITIES_PARENT_ID] Tasks: Opportunities Parent ID&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;account_tasks&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Accounts&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;ACCOUNTS&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;ACCOUNTS_PARENT_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Accounts ACCOUNTS_PARENT_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Accounts ACCOUNTS_PARENT_ID] Tasks: Accounts Parent ID&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;invoice_tasks&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Invoices&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;INVOICES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;INVOICES_PARENT_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Invoices INVOICES_PARENT_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Invoices INVOICES_PARENT_ID] Tasks: Invoices Parent ID&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;order_tasks&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Orders&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;ORDERS&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;one-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;ORDERS_PARENT_ID&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Orders ORDERS_PARENT_ID&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Orders ORDERS_PARENT_ID] Tasks: Orders Parent ID&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;tasks_audit_old&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Tasks&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;TASKS_AUDIT&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;TASKS_AUDIT_OLD&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Tasks TASKS_AUDIT_OLD&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Tasks TASKS_AUDIT_OLD] Tasks: Audit Old&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;/Relationships&gt;</Value></CustomProperty><CustomProperty><Name>crm:Filters</Name><Value>&lt;Filters&gt;&lt;Filter&gt;&lt;ID&gt;1ea2db42-6cea-40ac-b4c1-82dde31eb1d0&lt;/ID&gt;&lt;MODULE&gt;Tasks&lt;/MODULE&gt;&lt;MODULE_NAME&gt;Tasks TASKS_AUDIT_OLD&lt;/MODULE_NAME&gt;&lt;TABLE_NAME&gt;TASKS_AUDIT_OLD&lt;/TABLE_NAME&gt;&lt;DATA_FIELD&gt;TASKS_AUDIT_OLD.CREATED_BY&lt;/DATA_FIELD&gt;&lt;FIELD_NAME&gt;CREATED_BY&lt;/FIELD_NAME&gt;&lt;DATA_TYPE&gt;guid&lt;/DATA_TYPE&gt;&lt;OPERATOR&gt;changed&lt;/OPERATOR&gt;&lt;SEARCH_TEXT&gt;&lt;/SEARCH_TEXT&gt;&lt;/Filter&gt;&lt;Filter&gt;&lt;ID&gt;6a3bec4f-e33a-4c0b-80eb-e70b7c5b2c54&lt;/ID&gt;&lt;MODULE&gt;Users&lt;/MODULE&gt;&lt;MODULE_NAME&gt;Users USERS_ASSIGNED_USER_ID&lt;/MODULE_NAME&gt;&lt;TABLE_NAME&gt;USERS_ASSIGNED_USER_ID&lt;/TABLE_NAME&gt;&lt;DATA_FIELD&gt;USERS_ASSIGNED_USER_ID.RECEIVE_NOTIFICATIONS&lt;/DATA_FIELD&gt;&lt;FIELD_NAME&gt;RECEIVE_NOTIFICATIONS&lt;/FIELD_NAME&gt;&lt;DATA_TYPE&gt;bool&lt;/DATA_TYPE&gt;&lt;OPERATOR&gt;equals&lt;/OPERATOR&gt;&lt;SEARCH_TEXT&gt;1&lt;/SEARCH_TEXT&gt;&lt;SEARCH_TEXT_VALUES&gt;1&lt;/SEARCH_TEXT_VALUES&gt;&lt;/Filter&gt;&lt;Filter&gt;&lt;ID&gt;aff074d3-001a-450b-b54f-e24ab2cadad7&lt;/ID&gt;&lt;MODULE&gt;Users&lt;/MODULE&gt;&lt;MODULE_NAME&gt;Users USERS_ASSIGNED_USER_ID&lt;/MODULE_NAME&gt;&lt;TABLE_NAME&gt;USERS_ASSIGNED_USER_ID&lt;/TABLE_NAME&gt;&lt;DATA_FIELD&gt;USERS_ASSIGNED_USER_ID.EMAIL1&lt;/DATA_FIELD&gt;&lt;FIELD_NAME&gt;EMAIL1&lt;/FIELD_NAME&gt;&lt;DATA_TYPE&gt;string&lt;/DATA_TYPE&gt;&lt;OPERATOR&gt;not_empty&lt;/OPERATOR&gt;&lt;SEARCH_TEXT&gt;&lt;/SEARCH_TEXT&gt;&lt;/Filter&gt;&lt;/Filters&gt;</Value></CustomProperty></CustomProperties><DataSets><DataSet><Query><CommandText>select *    from            TASKS_AUDIT           TASKS    left outer join vwUSERS                     USERS_ASSIGNED_USER_ID                 on USERS_ASSIGNED_USER_ID.ID = TASKS.ASSIGNED_USER_ID    left outer join TASKS_AUDIT               TASKS_AUDIT_OLD                 on TASKS_AUDIT_OLD.ID        = TASKS.ID                and TASKS_AUDIT_OLD.AUDIT_VERSION = (select max(TASKS_AUDIT.AUDIT_VERSION)                                                    from TASKS_AUDIT                                                   where TASKS_AUDIT.ID            =  TASKS.ID                                                     and TASKS_AUDIT.AUDIT_VERSION &lt;  TASKS.AUDIT_VERSION                                                     and TASKS_AUDIT.AUDIT_TOKEN   &lt;&gt; TASKS.AUDIT_TOKEN                                                 )   where TASKS.AUDIT_ID = @AUDIT_ID     and TASKS.DELETED  = 0     and (TASKS_AUDIT_OLD.AUDIT_ID is null      or (not(TASKS.CREATED_BY                   is null     and TASKS_AUDIT_OLD.CREATED_BY                   is null    ) and (TASKS.CREATED_BY                   &lt;&gt; TASKS_AUDIT_OLD.CREATED_BY                   or TASKS.CREATED_BY is null or TASKS_AUDIT_OLD.CREATED_BY is null)))     and USERS_ASSIGNED_USER_ID.RECEIVE_NOTIFICATIONS = 1     and USERS_ASSIGNED_USER_ID.EMAIL1 is not null  </CommandText></Query><Fields></Fields></DataSet></DataSets></Report>', null;

	exec dbo.spWORKFLOWS_UpdateXOML @ID, null, 0, '<crm:SplendidSequentialWorkflow x:Name="Workflow1" WORKFLOW_ID="A278A0F2-D47B-4A74-A5BE-F208D8995F03" xmlns:crm="clr-namespace:SplendidCRM;Assembly=SplendidCRM" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/workflow">
	<SequenceActivity x:Name="Sequence1" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml/workflow">
		<crm:QuoteActivity x:Name="Quotes1" WORKFLOW_ID="{ActivityBind Workflow1,Path=WORKFLOW_ID}" AUDIT_ID="{ActivityBind Workflow1,Path=AUDIT_ID}">
			<crm:WorkflowLogActivity x:Name="Quotes1_Log" MODULE_TABLE="QUOTES" WORKFLOW_ID="{ActivityBind Workflow1,Path=WORKFLOW_ID}" />

			<CodeActivity x:Name="Quotes1_LoadByAUDIT_ID" ExecuteCode="{ActivityBind Quotes1,Path=LoadByAUDIT_ID}" />
		</crm:QuoteActivity>
		<crm:AlertActivity x:Name="Alert1" SUBJECT="SplendidCRM Quote - $quote_quote_num" ALERT_TYPE="Notification" ALERT_TEXT="$quote_modified_by has assigned an Quote to $quote_assigned_to.&#xD;&#xA;&#xD;&#xA;Quote Subject: $quote_name&#xD;&#xA;&#xD;&#xA;Quote Number: $quote_quote_num&#xD;&#xA;&#xD;&#xA;Quote Stage: $quote_quote_stage&#xD;&#xA;&#xD;&#xA;Expected Close Date: $date_quote_expected_closed&#xD;&#xA;&#xD;&#xA;Description: $quote_description&#xD;&#xA;&#xD;&#xA;You may review this Quote at:&#xD;&#xA;&lt;a href=&quot;$view_url&quot;&gt;$view_url&lt;/a&gt;&#xD;&#xA;&#xD;&#xA;" SOURCE_TYPE="normal message" CUSTOM_TEMPLATE_ID="00000000-0000-0000-0000-000000000000" PARENT_TYPE="Quotes" PARENT_ACTIVITY="Quotes1" WORKFLOW_ID="{ActivityBind Workflow1,Path=WORKFLOW_ID}">
			<crm:WorkflowLogActivity x:Name="Alert1_Log" MODULE_TABLE="EMAILS" WORKFLOW_ID="{ActivityBind Workflow1,Path=WORKFLOW_ID}" />
			<crm:AddRecipientActivity x:Name="Alert1_Quotes1_AssignedUserID" ALERT_NAME="Alert1" RECIPIENT_NAME="" RECIPIENT_ID="{ActivityBind Quotes1,Path=ASSIGNED_USER_ID}" RECIPIENT_TYPE="User" SEND_TYPE="to" />

			<CodeActivity x:Name="Alert1_Send" ExecuteCode="{ActivityBind Alert1,Path=Send}" />
		</crm:AlertActivity>
	</SequenceActivity>
</crm:SplendidSequentialWorkflow>';

	exec dbo.spWORKFLOW_ALERT_SHELLS_InsertOnly null, @ID, 'SplendidCRM Quote - $quote_name', 'Email', 'normal message', null, '$quote_modified_by has assigned an Quote to $quote_assigned_to.

Quote Subject: $quote_name
Quote Number: $quote_quote_num
Quote Stage: $quote_quote_stage
Expected Close Date: $quote_date_quote_expected_closed
Description: $quote_description

You may review this Quote at:
<a href="$view_url">$view_url</a>

', '<?xml version="1.0" encoding="UTF-8"?><Report Name="" xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner" xmlns="http://schemas.microsoft.com/sqlserver/reporting/2005/01/reportdefinition"><Width>11in</Width><PageWidth>11in</PageWidth><PageHeight>8.5in</PageHeight><LeftMargin>.5in</LeftMargin><RightMargin>.5in</RightMargin><TopMargin>.5in</TopMargin><BottomMargin>.5in</BottomMargin><Description></Description><Author></Author><CustomProperties><CustomProperty><Name>crm:Module</Name><Value>Quotes</Value></CustomProperty><CustomProperty><Name>crm:Related</Name><Value></Value></CustomProperty><CustomProperty><Name>crm:RelatedModules</Name><Value>&lt;Relationships&gt;&lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quotes_shipto_accounts&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Accounts&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;ACCOUNTS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;ID&lt;/RHS_KEY&gt;&lt;JOIN_TABLE&gt;QUOTES_ACCOUNTS&lt;/JOIN_TABLE&gt;&lt;JOIN_KEY_LHS&gt;QUOTE_ID&lt;/JOIN_KEY_LHS&gt;&lt;JOIN_KEY_RHS&gt;ACCOUNT_ID&lt;/JOIN_KEY_RHS&gt;&lt;RELATIONSHIP_TYPE&gt;many-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_NAME&gt;Accounts ACCOUNTS&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Accounts ACCOUNTS] Accounts&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quote_calls&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Calls&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;CALLS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;JOIN_TABLE&gt;&lt;/JOIN_TABLE&gt;&lt;JOIN_KEY_LHS&gt;&lt;/JOIN_KEY_LHS&gt;&lt;JOIN_KEY_RHS&gt;&lt;/JOIN_KEY_RHS&gt;&lt;RELATIONSHIP_TYPE&gt;many-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_NAME&gt;Calls CALLS&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Calls CALLS] Calls&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quote_meetings&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Meetings&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;MEETINGS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;JOIN_TABLE&gt;&lt;/JOIN_TABLE&gt;&lt;JOIN_KEY_LHS&gt;&lt;/JOIN_KEY_LHS&gt;&lt;JOIN_KEY_RHS&gt;&lt;/JOIN_KEY_RHS&gt;&lt;RELATIONSHIP_TYPE&gt;many-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_NAME&gt;Meetings MEETINGS&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Meetings MEETINGS] Meetings&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quote_tasks&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Tasks&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;TASKS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;JOIN_TABLE&gt;&lt;/JOIN_TABLE&gt;&lt;JOIN_KEY_LHS&gt;&lt;/JOIN_KEY_LHS&gt;&lt;JOIN_KEY_RHS&gt;&lt;/JOIN_KEY_RHS&gt;&lt;RELATIONSHIP_TYPE&gt;many-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_NAME&gt;Tasks TASKS&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Tasks TASKS] Tasks&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quotes_contacts_shipto&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Contacts&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;CONTACTS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;ID&lt;/RHS_KEY&gt;&lt;JOIN_TABLE&gt;QUOTES_CONTACTS&lt;/JOIN_TABLE&gt;&lt;JOIN_KEY_LHS&gt;QUOTE_ID&lt;/JOIN_KEY_LHS&gt;&lt;JOIN_KEY_RHS&gt;CONTACT_ID&lt;/JOIN_KEY_RHS&gt;&lt;RELATIONSHIP_TYPE&gt;many-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_NAME&gt;Contacts CONTACTS&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Contacts CONTACTS] Contacts&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quote_notes&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Notes&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;NOTES&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;PARENT_ID&lt;/RHS_KEY&gt;&lt;JOIN_TABLE&gt;&lt;/JOIN_TABLE&gt;&lt;JOIN_KEY_LHS&gt;&lt;/JOIN_KEY_LHS&gt;&lt;JOIN_KEY_RHS&gt;&lt;/JOIN_KEY_RHS&gt;&lt;RELATIONSHIP_TYPE&gt;many-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_NAME&gt;Notes NOTES&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Notes NOTES] Notes&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quotes_billto_accounts&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Accounts&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;ACCOUNTS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;ID&lt;/RHS_KEY&gt;&lt;JOIN_TABLE&gt;QUOTES_ACCOUNTS&lt;/JOIN_TABLE&gt;&lt;JOIN_KEY_LHS&gt;QUOTE_ID&lt;/JOIN_KEY_LHS&gt;&lt;JOIN_KEY_RHS&gt;ACCOUNT_ID&lt;/JOIN_KEY_RHS&gt;&lt;RELATIONSHIP_TYPE&gt;many-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_NAME&gt;Accounts ACCOUNTS&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Accounts ACCOUNTS] Accounts&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quotes_opportunities&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Opportunities&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;OPPORTUNITIES&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;ID&lt;/RHS_KEY&gt;&lt;JOIN_TABLE&gt;QUOTES_OPPORTUNITIES&lt;/JOIN_TABLE&gt;&lt;JOIN_KEY_LHS&gt;QUOTE_ID&lt;/JOIN_KEY_LHS&gt;&lt;JOIN_KEY_RHS&gt;OPPORTUNITY_ID&lt;/JOIN_KEY_RHS&gt;&lt;RELATIONSHIP_TYPE&gt;many-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_NAME&gt;Opportunities OPPORTUNITIES&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Opportunities OPPORTUNITIES] Opportunities&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quotes_contacts_billto&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Contacts&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;CONTACTS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;ID&lt;/RHS_KEY&gt;&lt;JOIN_TABLE&gt;QUOTES_CONTACTS&lt;/JOIN_TABLE&gt;&lt;JOIN_KEY_LHS&gt;QUOTE_ID&lt;/JOIN_KEY_LHS&gt;&lt;JOIN_KEY_RHS&gt;CONTACT_ID&lt;/JOIN_KEY_RHS&gt;&lt;RELATIONSHIP_TYPE&gt;many-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_NAME&gt;Contacts CONTACTS&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Contacts CONTACTS] Contacts&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quote_products&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Products&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;PRODUCTS&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;QUOTE_ID&lt;/RHS_KEY&gt;&lt;JOIN_TABLE&gt;&lt;/JOIN_TABLE&gt;&lt;JOIN_KEY_LHS&gt;&lt;/JOIN_KEY_LHS&gt;&lt;JOIN_KEY_RHS&gt;&lt;/JOIN_KEY_RHS&gt;&lt;RELATIONSHIP_TYPE&gt;many-to-many&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_NAME&gt;Products PRODUCTS&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Products PRODUCTS] Products&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;/Relationships&gt;</Value></CustomProperty><CustomProperty><Name>crm:Relationships</Name><Value>&lt;Relationships&gt;&lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;Quotes&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;QUOTES&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Quotes QUOTES&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Quotes QUOTES] Quotes&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;quotes_audit_old&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Quotes&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;QUOTES_AUDIT&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;ID&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;Quotes&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;QUOTES&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;ID&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;QUOTES_AUDIT_OLD&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Quotes QUOTES_AUDIT_OLD&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Quotes QUOTES_AUDIT_OLD] Quotes: Audit Old&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;users_all&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Users&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;USERS&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;USERS_ALL&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Users USERS_ALL&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Users USERS_ALL] Users All&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;teams&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Teams&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;TEAMS&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;TEAMS&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Teams TEAMS&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Teams TEAMS] Teams&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;Relationship&gt;&lt;RELATIONSHIP_NAME&gt;roles&lt;/RELATIONSHIP_NAME&gt;&lt;LHS_MODULE&gt;Roles&lt;/LHS_MODULE&gt;&lt;LHS_TABLE&gt;ACL_ROLES&lt;/LHS_TABLE&gt;&lt;LHS_KEY&gt;&lt;/LHS_KEY&gt;&lt;RHS_MODULE&gt;&lt;/RHS_MODULE&gt;&lt;RHS_TABLE&gt;&lt;/RHS_TABLE&gt;&lt;RHS_KEY&gt;&lt;/RHS_KEY&gt;&lt;RELATIONSHIP_TYPE&gt;&lt;/RELATIONSHIP_TYPE&gt;&lt;MODULE_ALIAS&gt;ACL_ROLES&lt;/MODULE_ALIAS&gt;&lt;MODULE_NAME&gt;Roles ACL_ROLES&lt;/MODULE_NAME&gt;&lt;DISPLAY_NAME&gt;[Roles ACL_ROLES] Roles&lt;/DISPLAY_NAME&gt;&lt;/Relationship&gt;  &lt;/Relationships&gt;</Value></CustomProperty><CustomProperty><Name>crm:Filters</Name><Value>&lt;Filters&gt;&lt;Filter&gt;&lt;ID&gt;f9e844c4-83ef-4b8c-83a7-07aefd1ffd46&lt;/ID&gt;&lt;ACTION_TYPE&gt;current_user&lt;/ACTION_TYPE&gt;&lt;RELATIONSHIP_NAME&gt;&lt;/RELATIONSHIP_NAME&gt;&lt;MODULE&gt;Quotes&lt;/MODULE&gt;&lt;MODULE_NAME&gt;Quotes QUOTES&lt;/MODULE_NAME&gt;&lt;TABLE_NAME&gt;QUOTES&lt;/TABLE_NAME&gt;&lt;DATA_FIELD&gt;QUOTES.ASSIGNED_USER_ID&lt;/DATA_FIELD&gt;&lt;FIELD_NAME&gt;ASSIGNED_USER_ID&lt;/FIELD_NAME&gt;&lt;DATA_TYPE&gt;&lt;/DATA_TYPE&gt;&lt;OPERATOR&gt;to&lt;/OPERATOR&gt;&lt;SEARCH_TEXT&gt;&lt;/SEARCH_TEXT&gt;&lt;RECIPIENT_NAME&gt;&lt;/RECIPIENT_NAME&gt;&lt;/Filter&gt;&lt;/Filters&gt;</Value></CustomProperty></CustomProperties><DataSources><DataSource Name="dataSource1"><ConnectionProperties><DataProvider>SQL</DataProvider><ConnectString></ConnectString></ConnectionProperties></DataSource></DataSources><DataSets><DataSet Name="dataSet"><Query><DataSourceName>dataSource1</DataSourceName><CommandText></CommandText></Query><Fields></Fields></DataSet></DataSets><Body><ReportItems><Table Name="table1"><DataSetName>dataSet</DataSetName><Header><RepeatOnNewPage>true</RepeatOnNewPage><TableRows><TableRow><Height>0.21in</Height><TableCells></TableCells></TableRow></TableRows></Header><Details><TableRows><TableRow><Height>0.21in</Height><TableCells></TableCells></TableRow></TableRows></Details><TableColumns></TableColumns></Table></ReportItems><Height>8.5in</Height></Body></Report>'
, '<crm:SplendidSequentialWorkflow x:Name="Workflow1" WORKFLOW_ID="A278A0F2-D47B-4A74-A5BE-F208D8995F03" xmlns:crm="clr-namespace:SplendidCRM;Assembly=SplendidCRM" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/workflow">
	<crm:QuoteActivity x:Name="Quotes2" WORKFLOW_ID="{ActivityBind Workflow1,Path=WORKFLOW_ID}" AUDIT_ID="{ActivityBind Workflow1,Path=AUDIT_ID}" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml/workflow">
		<crm:WorkflowLogActivity x:Name="Quotes2_Log" MODULE_TABLE="QUOTES" WORKFLOW_ID="{ActivityBind Workflow1,Path=WORKFLOW_ID}" />

		<CodeActivity x:Name="Quotes2_LoadByAUDIT_ID" ExecuteCode="{ActivityBind Quotes2,Path=LoadByAUDIT_ID}" />
	</crm:QuoteActivity>
	<crm:AlertActivity x:Name="Alert2" SUBJECT="SplendidCRM Quote - $quote_quote_num" ALERT_TYPE="Notification" ALERT_TEXT="$quote_modified_by has assigned an Quote to $quote_assigned_to.&#xD;&#xA;&#xD;&#xA;Quote Subject: $quote_name&#xD;&#xA;&#xD;&#xA;Quote Number: $quote_quote_num&#xD;&#xA;&#xD;&#xA;Quote Stage: $quote_quote_stage&#xD;&#xA;&#xD;&#xA;Expected Close Date: $date_quote_expected_closed&#xD;&#xA;&#xD;&#xA;Description: $quote_description&#xD;&#xA;&#xD;&#xA;You may review this Quote at:&#xD;&#xA;&lt;a href=&quot;$view_url&quot;&gt;$view_url&lt;/a&gt;&#xD;&#xA;&#xD;&#xA;" SOURCE_TYPE="normal message" CUSTOM_TEMPLATE_ID="00000000-0000-0000-0000-000000000000" PARENT_TYPE="Quotes" PARENT_ACTIVITY="Quotes2" WORKFLOW_ID="{ActivityBind Workflow1,Path=WORKFLOW_ID}" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml/workflow">
		<crm:WorkflowLogActivity x:Name="Alert2_Log" MODULE_TABLE="EMAILS" WORKFLOW_ID="{ActivityBind Workflow1,Path=WORKFLOW_ID}" />
		<crm:AddRecipientActivity x:Name="Alert2_Quotes2_AssignedUserID" ALERT_NAME="Alert2" RECIPIENT_NAME="" RECIPIENT_ID="{ActivityBind Quotes2,Path=ASSIGNED_USER_ID}" RECIPIENT_TYPE="User" SEND_TYPE="to" />

		<CodeActivity x:Name="Alert2_Send" ExecuteCode="{ActivityBind Alert2,Path=Send}" />
	</crm:AlertActivity>
</crm:SplendidSequentialWorkflow>';

	exec dbo.spWORKFLOW_TRIGGER_SHELLS_InsertOnly null, @ID, 'RECEIVE_NOTIFICATIONS', 'compare_specific', 'Primary', 'equals'   , 0, 'Users'   , null, '1';
	exec dbo.spWORKFLOW_TRIGGER_SHELLS_InsertOnly null, @ID, 'EMAIL1'               , 'compare_specific', 'Primary', 'not_empty', 0, 'Users'   , null, null;
	exec dbo.spWORKFLOW_TRIGGER_SHELLS_InsertOnly null, @ID, 'ASSIGNED_USER_ID'     , 'compare_change'  , 'Primary', 'changed'  , 0, 'Quotes', null, null;
end -- if;
GO


set nocount off;
GO

/* -- #if Oracle
	EXCEPTION
		WHEN NO_DATA_FOUND THEN
			StoO_selcnt := 0;
		WHEN OTHERS THEN
			RAISE;
	END;
	COMMIT WORK;
END;
/
-- #endif Oracle */

/* -- #if IBM_DB2
	commit;
  end
/

call dbo.spWORKFLOWS_Quotes_Notifications()
/

call dbo.spSqlDropProcedure('spWORKFLOWS_Quotes_Notifications')
/

-- #endif IBM_DB2 */

